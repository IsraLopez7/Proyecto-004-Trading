# Deep Trading MLOps - Configuration File
# Hyperparameters and settings for the entire pipeline

# Data Configuration
data:
  ticker: "QQQ"
  train_ratio: 0.6
  val_ratio: 0.2
  test_ratio: 0.2
  seed: 42

# Feature Engineering
features:
  # Moving averages windows
  sma_windows: [5, 10, 20, 50]
  ema_windows: [12, 26]

  # Momentum indicators
  rsi_period: 14
  roc_period: 10
  macd_fast: 12
  macd_slow: 26
  macd_signal: 9
  stochastic_k: 14
  stochastic_d: 3

  # Volatility indicators
  atr_period: 14
  bb_period: 20
  bb_std: 2
  volatility_window: 20

  # Volume indicators
  volume_sma_period: 20
  mfi_period: 14
  volume_roc_period: 5

  # Lag features
  return_lags: [1, 5, 10]

# Labeling Configuration
labeling:
  H: 5                    # Prediction horizon (days)
  tau: 0.005              # Threshold (0.5%)

  # Class mapping: 0=long, 1=short, 2=hold
  class_names: ["long", "short", "hold"]

# CNN Model Configuration
model:
  W: 256                  # Window length for sequences
  batch_size: 256
  epochs: 50
  learning_rate: 0.001

  # CNN Architecture
  filters: [64, 128, 256]
  kernel_size: 3
  pool_size: 2
  dropout: 0.3
  dense_units: [128, 64]

  # Training
  validation_split: 0.0   # Use separate val set
  early_stopping_patience: 10
  reduce_lr_patience: 5
  reduce_lr_factor: 0.5
  min_lr: 0.00001

  # Class weights (auto-computed if null)
  class_weights: null

  seed: 42

# MLflow Configuration
mlflow:
  experiment_name: "cnn_trading_signals"
  model_name: "cnn_signal_model"
  tracking_uri: "http://localhost:5000"

  # Artifacts to log
  log_confusion_matrix: true
  log_training_curves: true
  log_model_summary: true

# Backtesting Configuration
backtest:
  commission: 0.00125     # 0.125% per side
  borrow_rate: 0.0025     # 0.25% annual for shorts

  # Risk management
  stop_loss: 0.02         # 2%
  take_profit: 0.04       # 4%

  # Position sizing
  capital: 100000         # Initial capital
  position_size: 1.0      # Fraction of capital per trade

  # Execution
  slippage: 0.0           # Not implemented (can be added)

# Data Drift Configuration
drift:
  ks_test_threshold: 0.05   # p-value threshold
  top_n_features: 5         # Top N features with highest drift

# Logging
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
